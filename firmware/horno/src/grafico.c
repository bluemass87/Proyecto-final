/*
 * grafico.c
 *
 *  Created on: 22 de oct. de 2016
 *      Author: m4v
 */

#if defined(NO_BOARD_LIB)
#include "chip.h"
#else
#include "board.h"
#endif

#include "320240.h"

#define BLOQUE_ALTO 42

typedef struct {
	uint32_t linea[BLOQUE_ALTO];
} BLOQUE_T;


const BLOQUE_T digito[] = {
		{{
			0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3F80, 0x7FC0, 0xF1E0, 0x1E0F0,
			0x1C070, 0x1C070, 0x38038, 0x38038, 0x38038, 0x38038, 0x38038, 0x38038, 0x38038, 0x38038,
			0x38038, 0x38038, 0x1C070, 0x1C070, 0x1E070, 0xF1E0, 0x7FC0, 0x3F80, 0x0, 0x0,
			0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
			0x0, 0x0
		}},
		{{
			0x00FFFF11, 0x0, 0xFFFFFF00, 0x0, 0x0, 0xFFF00FFF, 0x0, 0x0, 0x0, 0xFFFFFFFF,
			0x0, 0x0, 0x0, 0x0, 0xFFFFFFFF, 0x0, 0x0, 0x0, 0x0, 0x0,
			0xFFFFFF11, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xFFFFFFFF, 0x0, 0x0,
			0x0, 0x0, 0x0, 0x0, 0x0, 0xFFFFFFFF, 0x0, 0x0, 0x0, 0x0,
			0x0, 0xFFFFFFFF
		}}
};

void Horno_grafico_bloque(void) {
	uint32_t x = 160, y = 180;
	BLOQUE_T bloque = digito[0];
	for (uint32_t i=0; i < BLOQUE_ALTO; i++) {
		Set_graphic_position(x/8, y+i);
		uint32_t linea = bloque.linea[i];
		for (uint32_t p=3; p>0;p--) {
			uint8_t w = (linea & (0xFF<<((p-1)*8)))>>((p-1)*8);
			Command_Write(MEM_WRITE);
			Parameter_Write(w);
		}
	}
}
